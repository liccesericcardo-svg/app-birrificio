<meta name='viewport' content='width=device-width, initial-scale=1'/><!DOCTYPE html>
<html>
<head>
  <title>Birrificio 79 ‚Äì The Game</title>
  <script src="https://cdn.jsdelivr.net/npm/phaser@3.60.0/dist/phaser.js"></script>
  <style>
    body { margin: 0; padding: 0; background: #111; }
    canvas { display: block; margin: auto; }
  </style>
</head>
<body>
<script>
const config = {
  type: Phaser.AUTO,
  width: 800,
  height: 600,
  backgroundColor: "#222",
  scene: [MenuScene, BeerRushScene],
  physics: { default: "arcade" }
};

let game = new Phaser.Game(config);

// --- Menu ---
class MenuScene extends Phaser.Scene {
  constructor() { super("MenuScene"); }
  create() {
    this.add.text(200, 100, "üç∫ Birrificio 79 ‚Äì The Game", { fontSize: "32px", fill: "#fff" });
    this.add.text(250, 200, "1) Beer Rush", { fontSize: "24px", fill: "#ff0" });
    this.add.text(250, 250, "2) Tycoon Comande (coming soon)", { fontSize: "20px", fill: "#aaa" });
    this.add.text(250, 300, "3) Burrito Quest (coming soon)", { fontSize: "20px", fill: "#aaa" });

    this.input.keyboard.on("keydown-ONE", () => { this.scene.start("BeerRushScene"); });
  }
}

// --- Beer Rush ---
class BeerRushScene extends Phaser.Scene {
  constructor() { super("BeerRushScene"); }
  preload() {}

  create() {
    this.add.text(20, 20, "Beer Rush ‚Äì raccogli le pinte üç∫", { fontSize: "20px", fill: "#fff" });
    
    // Player
    this.player = this.add.rectangle(400, 550, 50, 50, 0x00ff00);
    this.physics.add.existing(this.player);
    this.player.body.setCollideWorldBounds(true);

    // Oggetti (birre che cadono)
    this.objects = this.physics.add.group();
    this.time.addEvent({
      delay: 1000,
      callback: () => {
        let obj = this.objects.create(Phaser.Math.Between(50, 750), 0, null);
        obj.setSize(30, 30);
        obj.setTint(0xffd700);
        obj.setVelocityY(200);
      },
      loop: true
    });

    // Collider
    this.physics.add.overlap(this.player, this.objects, (player, obj) => {
      obj.destroy();
      this.score++;
      this.scoreText.setText("Punti: " + this.score);

      // Eventi speciali (placeholder)
      if (this.score === 5) {
        this.add.text(200, 100, "üç∑ Tavolo Simone vuole l'ordine speciale!", { fontSize: "18px", fill: "#ff8080" });
      }
      if (this.score === 10) {
        this.add.text(200, 150, "ü•Ç Saverio entra: KIT Saverio in arrivo!", { fontSize: "18px", fill: "#80ff80" });
      }
    });

    // Punteggio
    this.score = 0;
    this.scoreText = this.add.text(20, 50, "Punti: 0", { fontSize: "20px", fill: "#fff" });

    // Controlli
    this.cursors = this.input.keyboard.createCursorKeys();
  }

  update() {
    this.player.body.setVelocityX(0);
    if (this.cursors.left.isDown) this.player.body.setVelocityX(-300);
    else if (this.cursors.right.isDown) this.player.body.setVelocityX(300);
  }
}
</script>
</body>
</html>